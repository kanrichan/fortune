**注意：该项目已转移至 [ZeroBot-Plugin](https://github.com/FloatTech/ZeroBot-Plugin/tree/master/plugin_fortune) 更新，为本地合成图片，新版本仅支持在 OneBot 标准下使用。**

# fortune-运势
服务端基于Django，python pillow库绘图

客户端支持多种框架及协议

目标是共享运势牌库

![Badge](https://img.shields.io/badge/OneBot-v11-black)
[![License](https://img.shields.io/github/license/Yiwen-Chan/fortune.svg)](https://raw.githubusercontent.com/Yiwen-Chan/fortune/master/LICENSE)
[![QQ 群](https://img.shields.io/badge/qq%E7%BE%A4-1048452984-green.svg)](https://jq.qq.com/?_wv=1027&k=QMb7x1mM)

## 客户端下载
| 平台 | 依赖 | 插件地址 | 备注 |
| --- | --- | --- | --- |
| [先驱](https://www.xianqubot.com/) | 按道理正常电脑就能跑 | [Fortune For XQ v1.0.6](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.6/fortune-for-XQ.zip) | 已发布 |
| [先驱](https://www.xianqubot.com/) | [铃心自定义](http://qm.myepk.club/variable/) | [Fortune For EPK](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.4/fortune-EPK-v1.0.4.zip) | 已发布 |
| [Mirai](https://github.com/mamoe/mirai) | [Mirai-Native](https://github.com/iTXTech/mirai-native) & [铃心自定义](http://qm.myepk.club/variable/) | [Fortune For EPK](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.4/fortune-EPK-v1.0.4.zip) | 已发布 |
| [Mirai](https://github.com/mamoe/mirai) | [CQHTTP-Mirai](https://github.com/yyuueexxiinngg/cqhttp-mirai) | [Fortune For GO v1.0.6](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.6/fortune-for-GO.zip) | 已发布 |
| [Mirai](https://github.com/mamoe/mirai) | [CQHTTP-Mirai](https://github.com/yyuueexxiinngg/cqhttp-mirai) & [nonebot](https://github.com/nonebot/nonebot) | [Fortune For CQHTTP](https://github.com/Yiwen-Chan/fortune) | 待发布 |
| [MiraiGo](https://github.com/Mrs4s/MiraiGo) | [Go-CQHTTP](https://github.com/Mrs4s/go-cqhttp) | [Fortune For GO v1.0.6](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.6/fortune-for-GO.zip) | 已发布 |
| [MiraiGo](https://github.com/Mrs4s/MiraiGo) | [CQHTTP-Mirai](https://github.com/yyuueexxiinngg/cqhttp-mirai) & [nonebot](https://github.com/nonebot/nonebot) | [Fortune For CQHTTP](https://github.com/Yiwen-Chan/fortune) | 待发布 |

## 运势池子
<details>
<summary>车万</summary>

- 作者：@妖
- 展示：

<img width="160" src="/server/server/fortune/data/img/车万/灵梦3.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/车万/妖梦4.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/车万/幽幽子.jpg" alt="example">&emsp;

</details>
<details>
<summary>李清歌</summary>

- 作者：@aFox
- 展示：

<img width="160" src="/server/server/fortune/data/img/李清歌/2.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/李清歌/9.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/李清歌/11.png" alt="example">&emsp;

</details>
<details>
<summary>原神</summary>

- 作者：[@石头](https://github.com/Katou-Kouseki)
- 展示：

<img width="160" src="/server/server/fortune/data/img/原神/刻晴.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/原神/芭芭拉.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/原神/重云.jpg" alt="example">&emsp;

</details>
<details>
<summary>战双</summary>

- 作者：@汐
- 展示：

<img width="160" src="/server/server/fortune/data/img/战双/12.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/战双/17.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/战双/21.png" alt="example">&emsp;

</details>
<details>
<summary>阴阳师</summary>

- 作者：[@木理](https://github.com/Yiwen-Chan) 
- 展示：

<img width="160" src="/server/server/fortune/data/img/阴阳师/彼岸花.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/阴阳师/青行灯1.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/阴阳师/雪女1.png" alt="example">&emsp;

</details>
<details>
<summary>碧蓝幻想</summary>

- 作者：@一位不愿意透露姓名的神秘人
- 展示：

<img width="160" src="/server/server/fortune/data/img/碧蓝幻想/png15.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/碧蓝幻想/png28.png" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/碧蓝幻想/png85.png" alt="example">&emsp;

</details>
<details>
<summary>公主连结</summary>

- 作者：[@Lostdegree](https://github.com/Lostdegree)
- 展示：

<img width="160" src="/server/server/fortune/data/img/公主连结/frame_1.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/公主连结/frame_4.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/公主连结/frame_23.jpg" alt="example">&emsp;

</details>
<details>
<summary>诺亚幻想</summary>

- 作者：@汐言
- 展示：

<img width="160" src="/server/server/fortune/data/img/诺亚幻想/乌鸦4.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/诺亚幻想/鳄鱼4.jpg" alt="example">&emsp;
<img width="160" src="/server/server/fortune/data/img/诺亚幻想/蝴蝶2.jpg" alt="example">&emsp;

</details>

## 使用说明
- 本插件采用 [MIT许可协议](https://raw.githubusercontent.com/Yiwen-Chan/fortune/master/LICENSE) 使用请遵守许可协议
- 本插件一切开发旨在学习，请勿用于非法用途

### Fortune For XQ

#### 环境要求：

先驱版本 >= 2020090301  [下载地址](http://api.xianqubot.com/index.php?newver=beta)

#### 使用说明：

1.下载 [Fortune For XQ](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.5/fortune-XQ-v1.0.5.zip) 并解压

2.将 dll 文件 复制到 先驱\Plugin\ 路径下

3.重启先驱，启动插件 fortune-运势

4.修改自定义设置

#### 插件设置：

设置路径为：先驱\data\app\fortune\config.yml

设置说明如下：（不小心设置错误请删除该配置文件，重启框架会自动生成）

```
- 设置群号: 默认  //填群号，默认即下面没有配置群的时候统一采用此配置
  群聊设置:
    触发词语: 运势  //填触发关键词
    等待回复: 少女祈祷中......  //填收到回复立刻回复的语句，可为空
    卡池类型: 李清歌|碧蓝幻想|公主连结  //请看上面展示的池子，多个池子用 | 分隔
    每日限制: 全局文字  //全局 为所有池子只能抽一次，池子 为当前池子只能抽一次，关 为不做限制；图片 为抽过仍继续回复相同图片，文字 为抽过了就回复文字
    超过警告: 今天已经抽过了，请明天再来吧~  //当每日限制是 全局文字 或 池子文字 时，同一个人当天抽过的情况下，回复此项文字
```
注意：修改配置后请重启框架或给机器人发送 "ft -reload" 重载配置文件（" "不要）
### Fortune For EPK

#### 环境要求：

##### 方案一：

先驱版本 >= 2020090301  [下载地址](http://api.xianqubot.com/index.php?newver=beta)

铃心自定义 for XQ - C  [下载地址](http://qm.myepk.club/variable/)

##### 方案二：

Mirai Consloe Loader [下载地址](https://github.com/iTXTech/mirai-console-loader)

铃心自定义 DLL 版本 请自行加[铃心自定义](http://qm.myepk.club/variable/)QQ群获取

#### 使用说明：

1.下载 [Fortune For EPK](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.4/fortune-EPK-v1.0.4.zip) 并解压

2.启动铃心自定义并启动插件,打开控制面板

3.在左上角导入选择上述解压的 fortune-EPK-v1.0.4.epk 文件

4.修改自定义设置

#### 插件设置：

设置路径为：框架目录\data\app\club.myepk.customReply\fortune-运势.ini

设置说明如下：（不小心设置错误请删除该配置文件，重启框架会自动生成）

```
[默认]  //填群号，表示该群设置
触发=开  //为关则不会触发，关键词修改请在铃心自定义面板
回复=少女祈祷中......  //收到关键词立刻回复内容
类型=李清歌|碧蓝幻想|公主连结  //池子见上方，多个池子用 " | " 隔开
限制=全局  //每日生成限制 【全局】为所有池子当天只生成一次 【池子】为当前池子当天生成一次 【关】当天无限制生成，仅用于测试
```

### Fortune For GO
#### 环境要求：

##### 方案一：

Mirai 启动器 mirua (mirai-console = 1.0M4) [下载地址](https://github.com/zkonge/mirua)

CQHTTP-MIRAI (0.2.4-SNAPSHOT-1.0-M4) [下载地址](https://github.com/XZhouQD/cqhttp-mirai/releases/tag/0.2.4-SNAPSHOT-1.0-M4)

##### 方案二：

GO-CQHTTP [下载地址](https://github.com/Mrs4s/go-cqhttp)

#### 使用说明：

1.下载 [Fortune For GO](https://github.com/Yiwen-Chan/fortune/releases/download/v1.0.4/fortune-GO-v1.0.4.exe)

2.双击启动，注意暂时只有 win 64位 版本，如果需要其他请提交 issue

3.修改自定义设置

#### 插件设置：

设置路径为：fortune-GO-v1.0.4.exe 同级目录的 config.json

设置说明如下：（不小心设置错误请删除该配置文件，重启框架会自动生成）

```
{
	"WS服务器": "127.0.0.1",  //正向WS HOST，需要CQHTTP服务端设置正向WS为开，并且地址要对应
	"WS端口": 8000,  //正向WS PORT，需要CQHTTP服务端设置正向WS为开，并且端口要对应
	"运势设置": [  //无需修改
		{
			"群号": "默认",  //填群号，表示该群设置
			"触发": "运势",  //触发关键词，若为关则本群不会被触发
			"回复": "少女祈祷中......",  //收到关键词立刻回复内容
			"类型": "李清歌|碧蓝幻想|公主连结",  //池子见上方，多个池子用 " | " 隔开
			"限制": "全局"  //每日生成限制 【全局】为所有池子当天只生成一次 【池子】为当前池子当天生成一次 【关】当天无限制生成，仅用于测试
		}
    ]
}
```


## 致谢
### 特别感谢
- 此项目绘图代码来自 [@fz6m](https://github.com/fz6m) 的 [项目-Vortune](https://github.com/fz6m/nonebot-plugin/tree/master/CQVortune) 
- 此项目背景模板来自 [@Lostdegree](https://github.com/Lostdegree) 的 [项目-Portune](https://github.com/Lostdegree/Portune)
